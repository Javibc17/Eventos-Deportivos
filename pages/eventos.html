<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Eventos</title>
	<link rel="stylesheet" href="../styles/crudStyle.css">
</head>
<body>
	<header>
		<h1>Eventos</h1>
	</header>

	<main>
		<div>
			<table>
				<thead>
					<th>Id</th>
					<th>Nombre Evento</th>
					<th>Tipo Deporte</th>
					<th>Fecha</th>
					<th>Hora</th>
					<th>Ubicacion</th>
				</thead>

				<tbody>
					
				</tbody>
			</table>
		</div>

		<form>
			<div>
				<input type="text" placeholder="Nombre del Evento" required>
				<input type="text" placeholder="Deporte" required>
				<div>
					<input type="datetime-local" required>
					<section>
						<option value=""></option>
						<option value=""></option>
					</section>
				</div>
				<input type="text" placeholder="Ubicacion" required>
			</div>
				
			<div>
				errores
			</div>
				
			<button type="submit">Crear</button>
		</form>
	</main>

	<script>

		async function fetchEvents() {
			try {
				const response = await fetch("http://localhost/carpeta/EventosDeportivosCrud/procesar.php?table=eventos")
				
				if (!response.ok) {
					throw new Error("Error en la solicitud")
				}
				const events = await response.json()
				
				if (events.length !== 0) {
					const tbody = document.querySelector("tbody")

					events.forEach(event => {
						const tr = document.createElement('tr')
						tr.innerHTML = `
							<td>${event.id}</td>
							<td>${event.nombre_evento}</td>
							<td>${event.tipo_deporte}</td>
							<td>${event.fecha}</td>
							<td>${event.hora}</td>
							<td>${event.ubicacion}</td>
							<td>
								<button onclick="editManager(${event.id})">Editar</button>
								<button onclick="deleteEvent(${event.id})">Eliminar</button>
							</td>
						`
						tbody.appendChild(tr)
					})

				}else{
					alert("No se ha encontrado ningun evento registrado")
				}
				
			} catch (error) {
				console.error("Hubo un problema con la solicitud:", error)
			}
		}
	
		fetchEvents()
		
	</script>
</body>
</html>